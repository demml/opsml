name: my-mcp
metadata:
  description: My MCP server
  team: my-team
  language: python
  type: api
  tags:
    - mcp
    - api

# Define shared configurations that can be referenced
shared:
  resources:
    standard: &standard_resources # create an anchor
      cpu: 4
      memory: 16Gi
      storage: 100Gi
      gpu:
        type: nvidia-tesla-t4
        count: 1
        memory: 16Gi

    small: &small_resources
      cpu: 2
      memory: 8Gi
      storage: 50Gi

  locations:
    multi_region: &multi_region
      - us-central1
      - us-west1

# Each service is a distinct entity
services:
  - name: production
    environment: production
    provider: gcp
    location: *multi_region
    endpoints:
      - https://my-mcp.example.us-central1.com
      - https://my-mcp.example.us-west1.com
    resources: *standard_resources
    observability:
      logging: https://logging.prod.example.com/my-mcp
      tracing: https://tracing.prod.example.com/my-mcp
      graphs: https://grafana.prod.example.com/my-mcp

  - name: staging
    environment: staging
    provider: gcp
    location: *multi_region
    endpoints:
      - https://my-mcp.example.staging.us-central1.com
      - https://my-mcp.example.staging.us-west1.com
    resources: *small_resources
    observability:
      logging: https://logging.staging.example.com/my-mcp
      tracing: https://tracing.staging.example.com/my-mcp
      graphs: https://grafana.staging.example.com/my-mcp
